<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>APP渗透测试指南（一）</title>
      <link href="/2025/04/02/APP%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2025/04/02/APP%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E6%8C%87%E5%8D%97%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>本文分享主要围绕MacOs系统架构讲解，从环境搭建到实现APP逆向，也包含了在过程中可能遇到坑点，希望能帮助到此刻看到这篇文章的你，话不多说，开干！</p><h2 id="1-APP渗透测试环境搭建"><a href="#1-APP渗透测试环境搭建" class="headerlink" title="1. APP渗透测试环境搭建"></a>1. APP渗透测试环境搭建</h2><h3 id="1-1-frida安装"><a href="#1-1-frida安装" class="headerlink" title="1.1 frida安装"></a>1.1 frida安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查Android设备是否已连接</span></span><br><span class="line">pip install frida  </span><br><span class="line">pip install frida-tools</span><br><span class="line">pip install Pyro4</span><br></pre></td></tr></table></figure><h3 id="1-2-frida-server安装"><a href="#1-2-frida-server安装" class="headerlink" title="1.2 frida-server安装"></a>1.2 frida-server安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell getprop ro.product.cpu.abi <span class="comment"># 查看位数</span></span><br></pre></td></tr></table></figure><p><img src="/img-1/image-1.png" alt="alt text"><br>根据位数下载对应版本frida-server，下载地址：<a href="https://github.com/frida/frida/releases">https://github.com/frida/frida/releases</a> 【记得往下翻，就能找到】<br><img src="/img-1/image.png" alt="alt text"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb connect 192.168.10.13:5555 &amp;&amp; adb root <span class="comment"># 连接设备，并获取root权限,192.168.10.13为设备IP,5555为端口号,下面俩端口任意一个都行</span></span><br></pre></td></tr></table></figure><p><img src="/img-1/image-2.png" alt="alt text"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb push frida-server /data/local/tmp/ <span class="comment"># 推送frida-server到设备</span></span><br></pre></td></tr></table></figure><h3 id="1-3-apktool安装"><a href="#1-3-apktool安装" class="headerlink" title="1.3 apktool安装"></a>1.3 apktool安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装apktool(MacOS) windows安装方式略有不同，请自行查找</span></span><br><span class="line">brew install apktool</span><br><span class="line"><span class="comment"># 解包APK文件</span></span><br><span class="line">apktool d &lt;apk文件路径&gt; -o &lt;输出目录&gt;</span><br></pre></td></tr></table></figure><p>解包后的APK文件将生成一个输出目录，其中包含了资源文件、配置文件和代码文件。您可以查看AndroidManifest.xml文件，了解应用程序的基本信息和结构。</p><h3 id="1-4-dex2jar安装"><a href="#1-4-dex2jar安装" class="headerlink" title="1.4 dex2jar安装"></a>1.4 dex2jar安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装dex2jar</span></span><br><span class="line">brew install dex2jar</span><br><span class="line"><span class="comment"># 反编译DEX文件</span></span><br><span class="line">dex2jar &lt;解包后的目录&gt;/classes.dex</span><br><span class="line"><span class="comment"># 使用Jadx打开JAR文件</span></span><br><span class="line">jadx &lt;反编译后的JAR文件&gt;</span><br></pre></td></tr></table></figure><p>在JD-GUI中，您可以查看和修改Java代码。修改完成后，可使用apktool重新打包APK文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重新打包APK文件</span></span><br><span class="line">apktool b &lt;解包后的目录&gt; -o &lt;新apk文件路径&gt;</span><br></pre></td></tr></table></figure><h1 id="获取iOS设备信息"><a href="#获取iOS设备信息" class="headerlink" title="获取iOS设备信息"></a>获取iOS设备信息</h1><p>ideviceinfo</p><h1 id="检查是否已越狱（在设备终端执行）"><a href="#检查是否已越狱（在设备终端执行）" class="headerlink" title="检查是否已越狱（在设备终端执行）"></a>检查是否已越狱（在设备终端执行）</h1><p>cydia:&#x2F;&#x2F;package&#x2F;com.saurik.cydia</p><h1 id="查看设备UDID"><a href="#查看设备UDID" class="headerlink" title="查看设备UDID"></a>查看设备UDID</h1><p>idevice_id -l</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#### 模拟器vs真机测试对比</span><br><span class="line">```plaintext</span><br><span class="line">Android模拟器配置：</span><br><span class="line">├── 推荐配置</span><br><span class="line">│   ├── CPU: 4-6核心</span><br><span class="line">│   ├── RAM: 4GB以上</span><br><span class="line">│   ├── 存储空间: 6GB以上</span><br><span class="line">│   └── OpenGL ES 3.0支持</span><br><span class="line"></span><br><span class="line">iOS模拟器配置：</span><br><span class="line">├── 系统要求</span><br><span class="line">│   ├── macOS 10.15.4或更高版本</span><br><span class="line">│   ├── Xcode 11或更高版本</span><br><span class="line">│   └── 至少8GB RAM</span><br><span class="line"></span><br><span class="line">性能对比：</span><br><span class="line">├── 真机优势</span><br><span class="line">│   ├── 真实硬件环境</span><br><span class="line">│   ├── 实际性能表现</span><br><span class="line">│   ├── 完整的传感器支持</span><br><span class="line">│   └── 实际网络环境</span><br><span class="line">└── 模拟器优势</span><br><span class="line">    ├── 快速部署测试</span><br><span class="line">    ├── 方便调试</span><br><span class="line">    ├── 多版本测试</span><br><span class="line">    └── 资源监控便捷</span><br></pre></td></tr></table></figure><blockquote><p>💡 <strong>建议</strong>：</p><ul><li>初学者建议先用模拟器熟悉基本操作</li><li>正式渗透测试必须使用真机</li><li>重要漏洞验证需要在真机上复现</li></ul></blockquote><h3 id="2-2-基础工具安装"><a href="#2-2-基础工具安装" class="headerlink" title="2.2 基础工具安装"></a>2.2 基础工具安装</h3><h4 id="2-2-1-Android平台工具"><a href="#2-2-1-Android平台工具" class="headerlink" title="2.2.1 Android平台工具"></a>2.2.1 Android平台工具</h4><ul><li>ADB（Android Debug Bridge）配置</li><li>Android Studio与模拟器</li><li>Frida安装与配置</li><li>Objection框架部署</li></ul><h4 id="2-2-2-iOS平台工具"><a href="#2-2-2-iOS平台工具" class="headerlink" title="2.2.2 iOS平台工具"></a>2.2.2 iOS平台工具</h4><ul><li>越狱环境准备</li><li>iProxy与SSH连接</li><li>Cydia必备工具</li><li>iOS App Signer使用</li></ul><h4 id="2-2-3-通用分析工具"><a href="#2-2-3-通用分析工具" class="headerlink" title="2.2.3 通用分析工具"></a>2.2.3 通用分析工具</h4><ul><li>Burp Suite配置</li><li>Charles代理设置</li><li>Wireshark网络分析</li><li>MobSF自动化分析平台</li></ul><h2 id="3-APP获取与信息收集"><a href="#3-APP获取与信息收集" class="headerlink" title="3. APP获取与信息收集"></a>3. APP获取与信息收集</h2><h3 id="3-1-应用获取方式"><a href="#3-1-应用获取方式" class="headerlink" title="3.1 应用获取方式"></a>3.1 应用获取方式</h3><ul><li>应用商店下载</li><li>APK&#x2F;IPA文件提取</li><li>企业内部应用获取方法</li></ul><h3 id="3-2-基础信息收集"><a href="#3-2-基础信息收集" class="headerlink" title="3.2 基础信息收集"></a>3.2 基础信息收集</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Android应用信息获取</span></span><br><span class="line">adb shell pm list packages | grep target_app</span><br><span class="line">adb shell dumpsys package com.example.target</span><br><span class="line"></span><br><span class="line"><span class="comment"># iOS应用信息获取</span></span><br><span class="line">ideviceinstaller -l</span><br></pre></td></tr></table></figure><h3 id="3-3-静态分析初步"><a href="#3-3-静态分析初步" class="headerlink" title="3.3 静态分析初步"></a>3.3 静态分析初步</h3><ul><li>反编译APK文件</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用jadx反编译</span></span><br><span class="line">jadx-gui target.apk</span><br></pre></td></tr></table></figure><ul><li>提取IPA内容</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip target.ipa -d extracted_ipa</span><br></pre></td></tr></table></figure><ul><li>查看AndroidManifest.xml关键配置</li><li>识别第三方库与组件</li></ul><h2 id="4-建立测试基线"><a href="#4-建立测试基线" class="headerlink" title="4. 建立测试基线"></a>4. 建立测试基线</h2><h3 id="4-1-应用功能梳理"><a href="#4-1-应用功能梳理" class="headerlink" title="4.1 应用功能梳理"></a>4.1 应用功能梳理</h3><ul><li>功能地图绘制</li><li>关键业务流程识别</li><li>敏感功能标记</li></ul><h3 id="4-2-权限分析"><a href="#4-2-权限分析" class="headerlink" title="4.2 权限分析"></a>4.2 权限分析</h3><ul><li>Android权限模型分析</li><li>iOS权限请求审查</li><li>过度权限识别方法</li></ul><h3 id="4-3-网络通信初步分析"><a href="#4-3-网络通信初步分析" class="headerlink" title="4.3 网络通信初步分析"></a>4.3 网络通信初步分析</h3><ul><li>HTTP&#x2F;HTTPS流量捕获</li><li>证书固定检测</li><li>API端点识别与记录</li></ul><h2 id="5-准备渗透测试计划"><a href="#5-准备渗透测试计划" class="headerlink" title="5. 准备渗透测试计划"></a>5. 准备渗透测试计划</h2><h3 id="5-1-测试范围确定"><a href="#5-1-测试范围确定" class="headerlink" title="5.1 测试范围确定"></a>5.1 测试范围确定</h3><h3 id="5-2-测试方法选择"><a href="#5-2-测试方法选择" class="headerlink" title="5.2 测试方法选择"></a>5.2 测试方法选择</h3><h3 id="5-3-时间规划与资源分配"><a href="#5-3-时间规划与资源分配" class="headerlink" title="5.3 时间规划与资源分配"></a>5.3 时间规划与资源分配</h3><h3 id="5-4-风险评估与应急预案"><a href="#5-4-风险评估与应急预案" class="headerlink" title="5.4 风险评估与应急预案"></a>5.4 风险评估与应急预案</h3><h2 id="6-常见问题与解决方案"><a href="#6-常见问题与解决方案" class="headerlink" title="6. 常见问题与解决方案"></a>6. 常见问题与解决方案</h2><h3 id="6-1-证书固定绕过技术"><a href="#6-1-证书固定绕过技术" class="headerlink" title="6.1 证书固定绕过技术"></a>6.1 证书固定绕过技术</h3><h3 id="6-2-模拟器检测对抗"><a href="#6-2-模拟器检测对抗" class="headerlink" title="6.2 模拟器检测对抗"></a>6.2 模拟器检测对抗</h3><h3 id="6-3-root-越狱检测绕过"><a href="#6-3-root-越狱检测绕过" class="headerlink" title="6.3 root&#x2F;越狱检测绕过"></a>6.3 root&#x2F;越狱检测绕过</h3><h3 id="6-4-环境配置常见错误"><a href="#6-4-环境配置常见错误" class="headerlink" title="6.4 环境配置常见错误"></a>6.4 环境配置常见错误</h3><h2 id="7-小结与展望"><a href="#7-小结与展望" class="headerlink" title="7. 小结与展望"></a>7. 小结与展望</h2><h3 id="7-1-环境搭建要点回顾"><a href="#7-1-环境搭建要点回顾" class="headerlink" title="7.1 环境搭建要点回顾"></a>7.1 环境搭建要点回顾</h3><h3 id="7-2-下一篇预告：APP组件安全测试"><a href="#7-2-下一篇预告：APP组件安全测试" class="headerlink" title="7.2 下一篇预告：APP组件安全测试"></a>7.2 下一篇预告：APP组件安全测试</h3><h2 id="参考资源"><a href="#参考资源" class="headerlink" title="参考资源"></a>参考资源</h2><ul><li><a href="https://owasp.org/www-project-mobile-security-testing-guide/">OWASP Mobile Security Testing Guide</a></li><li><a href="https://developer.android.com/">Android官方开发文档</a></li><li><a href="https://developer.apple.com/documentation/security">iOS安全指南</a></li><li>推荐书籍与学习资源</li></ul><hr><blockquote><p>注：本文仅用于安全教育目的，请在合法授权的情况下进行渗透测试活动。未经授权对系统进行测试属于违法行为。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 渗透测试 </category>
          
          <category> APP逆向 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> APP逆向 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
